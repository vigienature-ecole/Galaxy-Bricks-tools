<tool id="ImportINPN" name="Données de l'Inventaire National du Patrimoine Naturel">
    <description>Importer des données depuis l'Inventaire National du Patrimoine Naturel</description>
    <requirements>
        <requirement type="package" version="1.98_1.2">r-rcurl</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
      Rscript '$__tool_directory__/import_from_depot.R' '$Complement_data.observatoire'
      #if $Complement_data.observatoire == "INPN"
          '$Complement_data.precision'
      #end if
      '$output'
        ]]>
    </command>
    <inputs>
        <conditional name="Complement_data">
            <param name="observatoire" type="select" label="Choisissez les données de l'Inventaire National du Patrimoine Naturel que vous souhaitez importer" multiple="false" help="Les données sont organisées par zones géographiques de 10km par 10km. La première colonne donne le nom unique de chaque zone géographique. Les données des autres colonnes représentent soit la valeur totale de la variable dans cette zone (la population ou les espèces observées par exemple), la valeur moyenne (température par exemple) ou la valeur majoritaire (milieu par exemple)" >
                <option value="INPN"> Les données agrégées pour tout type d'organismes</option>
    	          <option value="INPN_Gasteropodes"> Les données complètes escargots et limaces (Gastéropodes)</option>
                <option value="INPN_Rhopaloceres"> Les données complètes papillons (Rhopalocères)</option>
            </param>
            <when value="INPN">
                <param name="precision" type="select" display="radio" label="Sélectionnez les données que vous voulez importer :" multiple="false">
                    <option value="base">Données géographiques, climatiques, de l'environnement et nombres d'espèces pour les principaux groupes</option>
                    <option value="saisons"> Les données précédentes avec en plus des données séparées par saisons pour les papillons et les escargots</option>
                </param>
            </when>
            <when value="INPN_Gasteropodes">
            </when>
            <when value="INPN_Ropaloceres">
            </when>
        </conditional>
    </inputs>
    <outputs>
        <data format="csv" name="output" from_work_dir="output-importVNE.csv" label="Données_${Complement_data.observatoire}.csv"/>
    </outputs>
    <help><![CDATA[

        .. class:: titre1-aide

        A quoi sert cet outil ?

        Vous pouvez importer des données de l'Inventaire National du Patrimoine Naturel grâce à cet outil.

        .. image:: https://galaxy.vigienature-ecole.fr/static/tools/bricks/images/logo_inpn.png

        .. class:: titre1-aide

        Utiliser cet outil

        Il vous suffit de choisir les données qui vous intéresse. Si vous souhaitez avoir des informations sur les protocoles, cliquez sur les liens ci-dessous.

        .. class:: titre2-aide

        Les données agrégées pour tout type d'organismes :


        .. class:: titre2-aide

        Les données complètes escargots et limaces (Gastéropodes) :


        .. class:: titre2-aide

        Les données complètes papillons (Rhopalocères) :



    ]]></help>
</tool>
